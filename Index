<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מערכת ניהול משימות נסיעה</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Rubik', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-4 max-w-md">
        <div id="managerSection" class="bg-white shadow-md rounded-lg p-6">
            <h1 class="text-2xl font-bold mb-6 text-center">יצירת משימת נסיעה</h1>
            
            <form id="taskForm" class="space-y-4">
                <div>
                    <label class="block mb-2">בחר נהג:</label>
                    <select id="driverSelect" class="w-full p-2 border rounded">
                        <option value="">בחר נהג</option>
                        <option value="חכמת">חכמת</option>
                        <option value="שאול">שאול</option>
                        <option value="עלי">עלי</option>
                        <option value="עלא">עלא</option>
                        <option value="יואב">יואב</option>
                    </select>
                </div>

                <div>
                    <label class="block mb-2">שם לקוח:</label>
                    <input type="text" id="customerName" class="w-full p-2 border rounded" placeholder="הזן שם לקוח">
                </div>

                <div>
                    <label class="block mb-2">כתובת:</label>
                    <input type="text" id="address" class="w-full p-2 border rounded" placeholder="הזן כתובת מלאה">
                </div>

                <div>
                    <label class="block mb-2">איש קשר:</label>
                    <input type="text" id="contactPerson" class="w-full p-2 border rounded" placeholder="שם איש הקשר">
                </div>

                <div>
                    <label class="block mb-2">טלפון:</label>
                    <input type="tel" id="phoneNumber" class="w-full p-2 border rounded" placeholder="מספר טלפון">
                </div>

                <div>
                    <label class="block mb-2">סוג הובלה:</label>
                    <select id="transportType" class="w-full p-2 border rounded">
                        <option value="">בחר סוג הובלה</option>
                        <option value="הובלת מנוף 10 מטר">הובלת מנוף 10 מטר</option>
                        <option value="הובלת מנוף 15 מטר">הובלת מנוף 15 מטר</option>
                        <option value="הובלת משאית">הובלת משאית</option>
                        <option value="עבודת מנוף">עבודת מנוף</option>
                        <option value="העברת ציוד">העברת ציוד</option>
                        <option value="טנדר">טנדר</option>
                    </select>
                </div>

                <div>
                    <label class="block mb-2">הערות נוספות:</label>
                    <textarea id="additionalNotes" class="w-full p-2 border rounded" rows="3" placeholder="הערות נוספות למשימה"></textarea>
                </div>

                <button 
                    type="button" 
                    onclick="createTask()"
                    class="w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600 transition"
                >
                    צור משימה
                </button>
            </form>
        </div>

        <div id="driverTaskView" class="hidden bg-white shadow-md rounded-lg p-6 mt-6">
            <h2 class="text-2xl font-bold mb-6 text-center">פרטי משימת נסיעה</h2>
            
            <div id="taskDetails" class="space-y-4">
                <div class="flex justify-between items-center">
                    <strong>נהג:</strong>
                    <span id="viewDriver"></span>
                </div>
                <div class="flex justify-between items-center">
                    <strong>לקוח:</strong>
                    <span id="viewCustomer"></span>
                </div>
                <div class="flex justify-between items-center">
                    <strong>כתובת:</strong>
                    <span id="viewAddress"></span>
                </div>
                <div class="flex justify-between items-center">
                    <strong>איש קשר:</strong>
                    <span id="viewContact"></span>
                </div>
                <div class="flex justify-between items-center">
                    <strong>טלפון:</strong>
                    <span id="viewPhone"></span>
                </div>
                <div class="flex justify-between items-center">
                    <strong>סוג הובלה:</strong>
                    <span id="viewTransportType"></span>
                </div>
                <div class="flex justify-between items-center">
                    <strong>הערות:</strong>
                    <span id="viewNotes"></span>
                </div>

                <div class="flex space-x-2">
                    <button 
                        onclick="shareViaWhatsApp()"
                        class="w-1/3 bg-green-500 text-white p-2 rounded hover:bg-green-600 transition"
                    >
                        שתף בווצאפ
                    </button>
                    <button 
                        onclick="shareToTravelGroup()"
                        class="w-1/3 bg-blue-500 text-white p-2 rounded hover:bg-blue-600 transition"
                    >
                        שתף בקבוצה
                    </button>
                    <button 
                        onclick="openWaze()"
                        class="w-1/3 bg-blue-700 text-white p-2 rounded hover:bg-blue-800 transition"
                    >
                        פתח Waze
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function createTask() {
            const driver = document.getElementById('driverSelect').value;
            const customer = document.getElementById('customerName').value;
            const address = document.getElementById('address').value;
            const contact = document.getElementById('contactPerson').value;
            const phone = document.getElementById('phoneNumber').value;
            const transportType = document.getElementById('transportType').value;
            const notes = document.getElementById('additionalNotes').value;

            if (!driver || !customer || !address || !phone || !transportType) {
                alert('אנא מלא את כל השדות החובה');
                return;
            }

            document.getElementById('viewDriver').textContent = driver;
            document.getElementById('viewCustomer').textContent = customer;
            document.getElementById('viewAddress').textContent = address;
            document.getElementById('viewContact').textContent = contact;
            document.getElementById('viewPhone').textContent = phone;
            document.getElementById('viewTransportType').textContent = transportType;
            document.getElementById('viewNotes').textContent = notes;

            document.getElementById('managerSection').classList.add('hidden');
            document.getElementById('driverTaskView').classList.remove('hidden');
        }

        function shareViaWhatsApp() {
            const taskMessage = `
📋 משימת נסיעה:
👤 נהג: ${document.getElementById('viewDriver').textContent}
🏢 לקוח: ${document.getElementById('viewCustomer').textContent}
📍 כתובת: ${document.getElementById('viewAddress').textContent}
👥 איש קשר: ${document.getElementById('viewContact').textContent}
📞 טלפון: ${document.getElementById('viewPhone').textContent}
🚚 סוג הובלה: ${document.getElementById('viewTransportType').textContent}
📝 הערות: ${document.getElementById('viewNotes').textContent}
            `;

            const whatsappUrl = `https://wa.me/972508860896?text=${encodeURIComponent(taskMessage)}`;
            window.open(whatsappUrl, '_blank');
        }

        function shareToTravelGroup() {
            const taskMessage = `
📋 משימת נסיעה חדשה:
👤 נהג: ${document.getElementById('viewDriver').textContent}
🏢 לקוח: ${document.getElementById('viewCustomer').textContent}
📍 כתובת: ${document.getElementById('viewAddress').textContent}
👥 איש קשר: ${document.getElementById('viewContact').textContent}
📞 טלפון: ${document.getElementById('viewPhone').textContent}
🚚 סוג הובלה: ${document.getElementById('viewTransportType').textContent}
📝 הערות: ${document.getElementById('viewNotes').textContent}

🚨 נא לאשר קבלת המשימה 🚨
            `;

            // קישור לקבוצת ווצאפ (נא להחליף בקישור הרלוונטי)
            const whatsappGroupUrl = `https://chat.whatsapp.com/JyaFftNn1csEMKFw3Uqo9k`;
            const finalUrl = `https://wa.me/972508860896?text=${encodeURIComponent(taskMessage)}`;
            
            window.open(finalUrl, '_blank');
        }

        function openWaze() {
            const address = document.getElementById('viewAddress').textContent;
            const wazeUrl = `https://waze.com/ul?q=${encodeURIComponent(address)}`;
            window.open(wazeUrl, '_blank');
        }
    </script>
</body>
</html>
